---
description: юникаст, мультикаст, бродкаст
---

# Типы трафика

> Коротко: три базовых модели доставки. Unicast — один-к-одному. Multicast — один-ко-многим по группе. Broadcast — всем в домене.

### Unicast

* Обычная адресация «от источника к одному получателю».
* L3: IP-адрес получателя. L2: MAC целевого порта.
* Поведение: коммутатор отправляет кадр только на порт с нужным MAC.
* Диагностика: `ip.addr == 192.168.1.10` или `tcp.port == 443` в capture.

### Broadcast

* Адресация «всем в одном L2 broadcast-домене».
* Ethernet broadcast MAC: `ff:ff:ff:ff:ff:ff`.
* IPv4 broadcast: адрес сети с all-ones (напр. `192.168.1.255`) и `255.255.255.255`.
* Поведение: кадр отправляется на все порты в том же broadcast-домене.
* Риски: broadcast-storms, нагрузка на CPU клиентов.
* Диагностика: `eth.dst == ff:ff:ff:ff:ff:ff` или `ip.dst == 255.255.255.255`.

### Multicast

* Адресует группу заинтересованных получателей. Модель «one-to-many» по группе.
* IPv4 multicast: `224.0.0.0/4` (224.0.0.0 — 239.255.255.255).
* L2 mapping: MAC начинается с `01:00:5e` плюс часть битов IP (нижние 23 бита). Пример: `224.0.0.1` → `01:00:5e:00:00:01`.
* IPv6 multicast: адреса `ff00::/8`. L2 mapping — префикс `33:33` + низ 32 бит IPv6.
* Группы управляются протоколами IGMP (IPv4) и MLD (IPv6).
* Multicast routing требует специальных протоколов (PIM-SM, PIM-DM) и механизма RP/Source.
* Switches: при включённом IGMP-snooping коммутатор «подслушивает» IGMP и ограничивает flooding только на порты, где есть подписчики. Без snooping — мультикаст флуктуирует как широковещание.
* RPF (Reverse Path Forwarding) — правило проверки источника в multicast-routing.

### Протоколы и версии

* **IGMPv1** — базовый join.
* **IGMPv2** — добавлен leave.
* **IGMPv3** — support Source-Specific Multicast (SSM).
* **PIM Sparse Mode (SM)** — для редких подписчиков с RP.
* **PIM Dense Mode (DM)** — для плотных сетей, flood+prune.

### Практические советы

* Для сервисов «один-ко-всем» используйте broadcast с осторожностью.
* Для потоковой трансляции и эффективной доставки — multicast + IGMP + PIM.
* В дата-центрах часто отключают L2-flooding и включают IGMP-snooping.
* Проверяйте TTL multicast-пакетов — распространение ограничено TTL.

### Полезные фильтры Wireshark / tcpdump

* Multicast IP общий: `ip.dst == 224.0.0.1` (или `igmp`).
* IPv6 multicast: `ipv6.dst[0] == 0xff` (или `ipv6.dst == ff02::1`).
* Ethernet broadcast: `eth.dst == ff:ff:ff:ff:ff:ff`.

### Экзаменационные тезисы

1. Unicast = один адресат; multicast = адресная группа; broadcast = все в L2-домене.
2. IPv4 multicast адреса лежат в `224.0.0.0/4`.
3. Multicast требует IGMP/MLD и маршрутизирующих протоколов (PIM) для межсегментной доставки.

### Вопросы для самопроверки

1. Чем отличается IGMP-snooping от IGMP-routing?
2. Какой MAC соответствует IPv4-мультикасту `224.0.0.1`?
3. Почему multicast требует специальных маршрутизирующих правил (RPF)?
