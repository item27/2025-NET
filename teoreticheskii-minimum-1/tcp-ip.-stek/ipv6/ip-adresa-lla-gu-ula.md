# IP адреса LLA, GU, ULA

## IPv6 — кратко

* IPv6 — 128-битные адреса, нет broadcast, используются multicast и NDP.
* Префикс записывают как `addr/prefix` например `2001:db8::1/64`. В формулах: $$/64$$, $$/48$$ и т.п.

***

### Link-Local Address (LLA)

* Диапазон: $$\textbf{fe80::/10}$$ (обычно адреса выглядят как `fe80::...`).
* Назначение: локальная связь в пределах одного канала (link). Используется для Neighbor Discovery (NDP), SLAAC начальной конфигурации, маршрутизации по соседям.
* Характеристики:
  * **Не маршрутизируются** между узлами через маршрутизатор (ограничены link).
  * Генерация: часто формируется автоматически на основе MAC через EUI-64 или по случайному интерфейсному идентификатору (privacy/temporary).
  * Всегда присутствует на интерфейсе IPv6-стека.
* Пример: `fe80::1a2b:3cff:fe4d:5e6f%eth0/64` (зона интерфейса `%eth0` для многолинковых хостов).

***

### Global Unicast (GU)

* Диапазон: публичные глобальные адреса обычно в $$\textbf{2000::/3}$$.
* Назначение: глобальная адресация в Интернете, маршрутизируемая в глобальной сети.
* Характеристики:
  * Префиксы выдаёт провайдер/RIR; внутри организации обычно дают блок типа $$/48$$ или $$/32$$; подсети обычно используют $$/64$$.
  * Может назначаться **SLAAC** (автоконфигурация) или **DHCPv6**; возможен комбинированный подход.
  * Требует корректной маршрутизации и публичной рекламы (BGP) для выхода в Интернет.
* Пример: `2001:db8:10:1::1/64` — адрес в глобальном префиксе (тестовый `2001:db8::/32`).

***

### Unique Local Address (ULA)

* Диапазон: $$\textbf{fc00::/7}$$. На практике выделяют пространство локально назначаемое: $$\textbf{fd00::/8}$$ (локально уникальные).
* Назначение: частная адресация для внутренних сетей, аналог RFC1918 в IPv4. Не предполагается маршрутизация в глобальном Интернете.
* Характеристики:
  * Обычно генерируют как `fdxx:xxxx:xxxx::/48` с 40-битным случайным префиксом, чтобы избежать конфликтов при слиянии сетей.
  * Используются для приватных сетей, VPN, внутрисетевого addressing без публичной рекламы.
  * Теоретически `fc00::/8` зарезервирован для централизованного присвоения (не используется на практике).
* Пример: `fd12:3456:789a::1/64` (локально уникальный префикс `/48` для сайта).

***

### Важные практические моменты

* **Стандартная подсеть для хост-интерфейса в IPv6 =** $$/64$$**.** Многие механизмы (SLAAC, SLA) предполагают $$/64$$.
* **SLAAC** создаёт интерфейсный идентификатор (EUI-64 или privacy); `radvd` на роутере объявляет префикс.
* **Нет NAT по умолчанию.** IPv6 ориентирован на end-to-end; ULA и GU служат разным целям.
* **Нету broadcast**; вместо этого используются multicast (`ff00::/8`) и NDP (замена ARP).
* **Privacy extensions** создают временные адреса GU для исходящих соединений (улучшают приватность).

***

### Диагностика и команды (быстро)

*   Показать IPv6 адреса на Linux:

    ```bash
    ip -6 addr show
    ```
*   Проверить соседей NDP:

    ```bash
    ip -6 neigh show
    ```
*   Проверить маршруты IPv6:

    ```bash
    ip -6 route show
    ```

***

### Экзаменационные тезисы

1. LLA: $$fe80::/10$$, локальная, не маршрутизируется.
2. GU: глобальные адреса $$2000::/3$$, маршрутизируемы в Интернет.
3. ULA: $$fc00::/7$$ (локально `fd00::/8`), приватные, не рекламируются глобально.
4. Подсеть почти всегда $$/64$$.
5. В IPv6 нет broadcast; используется multicast и NDP.

***

### Вопросы для самопроверки

1. Почему в IPv6 обычно используют $$/64$$ для подсети?
2. Какой адрес используется для Neighbor Discovery вместо ARP?
3. Чем ULA отличается от частного IPv4 (RFC1918) по назначению и рискам при объединении сетей?
